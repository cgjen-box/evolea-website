---
interface Props {
  logoPath: string;
  alt?: string;
  class?: string;
  imgClass?: string;
  variant?: 'default' | 'inverted';
}

const {
  logoPath,
  alt = 'EVOLEA',
  class: className = '',
  imgClass = '',
  variant = 'default'
} = Astro.props;
---

<div class:list={['logo-sparkles-wrapper', className, variant === 'inverted' && 'logo-inverted']}>
  <img
    src={logoPath}
    alt={alt}
    class:list={['logo-img', imgClass]}
  />

  <!-- Sparkle container - purely decorative -->
  <div class="sparkles" aria-hidden="true">
    <!-- Inner layer: Glowing dots (close to logo) -->
    <span class="sparkle sparkle-dot dot-1"></span>
    <span class="sparkle sparkle-dot dot-2"></span>
    <span class="sparkle sparkle-dot dot-3"></span>
    <span class="sparkle sparkle-dot dot-4"></span>
    <span class="sparkle sparkle-dot dot-5"></span>

    <!-- Middle layer: 4-point stars -->
    <span class="sparkle sparkle-star star-1"></span>
    <span class="sparkle sparkle-star star-2"></span>
    <span class="sparkle sparkle-star star-3"></span>

    <!-- Outer layer: Dust particles (for seamless blend) -->
    <span class="sparkle sparkle-dust dust-1"></span>
    <span class="sparkle sparkle-dust dust-2"></span>
    <span class="sparkle sparkle-dust dust-3"></span>
    <span class="sparkle sparkle-dust dust-4"></span>
    <span class="sparkle sparkle-dust dust-5"></span>
    <span class="sparkle sparkle-dust dust-6"></span>
    <span class="sparkle sparkle-dust dust-7"></span>
    <span class="sparkle sparkle-dust dust-8"></span>
  </div>
</div>

<style>
  .logo-sparkles-wrapper {
    position: relative;
    display: inline-flex;
    align-items: center;
  }

  .logo-img {
    position: relative;
    z-index: 1;
  }

  /* Sparkle container */
  .sparkles {
    position: absolute;
    inset: -12px -16px;
    pointer-events: none;
    z-index: 2;
  }

  /* Base sparkle styles */
  .sparkle {
    position: absolute;
    will-change: opacity, transform;
  }

  /* ===========================================
     SPARKLE SHAPES
     =========================================== */

  /* Glowing dots */
  .sparkle-dot {
    border-radius: 50%;
    box-shadow: 0 0 4px currentColor, 0 0 8px currentColor;
  }

  /* 4-point stars */
  .sparkle-star {
    clip-path: polygon(50% 0%, 62% 38%, 100% 50%, 62% 62%, 50% 100%, 38% 62%, 0% 50%, 38% 38%);
  }

  /* Dust particles */
  .sparkle-dust {
    border-radius: 50%;
    box-shadow: 0 0 2px currentColor;
  }

  /* ===========================================
     INNER LAYER: GLOWING DOTS
     =========================================== */

  .dot-1 {
    width: 5px;
    height: 5px;
    top: 15%;
    left: 5%;
    color: #7BEDD5; /* Mint */
    animation: twinkle-1 2.3s ease-in-out infinite;
    animation-delay: -0.7s;
  }

  .dot-2 {
    width: 4px;
    height: 4px;
    top: 60%;
    left: 12%;
    color: #FFE066; /* Gold */
    animation: twinkle-2 2.7s ease-in-out infinite;
    animation-delay: -1.9s;
  }

  .dot-3 {
    width: 6px;
    height: 6px;
    top: 25%;
    right: 8%;
    color: #DD48E0; /* Magenta */
    animation: twinkle-3 1.8s ease-in-out infinite;
    animation-delay: -0.3s;
  }

  .dot-4 {
    width: 4px;
    height: 4px;
    top: 70%;
    right: 15%;
    color: #CD87F8; /* Lavender */
    animation: twinkle-1 3.1s ease-in-out infinite;
    animation-delay: -2.3s;
  }

  .dot-5 {
    width: 5px;
    height: 5px;
    bottom: 20%;
    left: 45%;
    color: #5DADE2; /* Sky Blue */
    animation: twinkle-2 2.1s ease-in-out infinite;
    animation-delay: -1.1s;
  }

  /* ===========================================
     MIDDLE LAYER: 4-POINT STARS
     =========================================== */

  .star-1 {
    width: 8px;
    height: 8px;
    top: 5%;
    left: 25%;
    background: #FFE066; /* Gold */
    animation: twinkle-3 2.9s ease-in-out infinite;
    animation-delay: -1.3s;
  }

  .star-2 {
    width: 7px;
    height: 7px;
    top: 40%;
    right: 2%;
    background: #EF8EAE; /* Blush */
    animation: twinkle-1 3.6s ease-in-out infinite;
    animation-delay: -2.9s;
  }

  .star-3 {
    width: 6px;
    height: 6px;
    bottom: 10%;
    right: 30%;
    background: #7BEDD5; /* Mint */
    animation: twinkle-2 2.4s ease-in-out infinite;
    animation-delay: -0.5s;
  }

  /* ===========================================
     OUTER LAYER: DUST PARTICLES
     =========================================== */

  .dust-1 {
    width: 3px;
    height: 3px;
    top: -5%;
    left: 15%;
    color: #CD87F8; /* Lavender */
    animation: dust-drift 3.7s ease-in-out infinite;
    animation-delay: -0.4s;
  }

  .dust-2 {
    width: 2px;
    height: 2px;
    top: 10%;
    right: -3%;
    color: #FFE066; /* Gold */
    animation: dust-drift 4.1s ease-in-out infinite;
    animation-delay: -1.7s;
  }

  .dust-3 {
    width: 3px;
    height: 3px;
    top: 50%;
    left: -5%;
    color: #DD48E0; /* Magenta */
    animation: dust-drift 3.3s ease-in-out infinite;
    animation-delay: -2.8s;
  }

  .dust-4 {
    width: 2px;
    height: 2px;
    bottom: -3%;
    left: 35%;
    color: #5DADE2; /* Sky Blue */
    animation: dust-drift 4.5s ease-in-out infinite;
    animation-delay: -0.9s;
  }

  .dust-5 {
    width: 3px;
    height: 3px;
    bottom: 5%;
    right: -2%;
    color: #7BEDD5; /* Mint */
    animation: dust-drift 3.9s ease-in-out infinite;
    animation-delay: -3.1s;
  }

  .dust-6 {
    width: 2px;
    height: 2px;
    top: 80%;
    left: -3%;
    color: #EF8EAE; /* Blush */
    animation: dust-drift 4.3s ease-in-out infinite;
    animation-delay: -1.4s;
  }

  .dust-7 {
    width: 2px;
    height: 2px;
    top: -8%;
    right: 25%;
    color: #FF7E5D; /* Coral */
    animation: dust-drift 3.5s ease-in-out infinite;
    animation-delay: -2.2s;
  }

  .dust-8 {
    width: 3px;
    height: 3px;
    top: 30%;
    left: -8%;
    color: #FFE066; /* Gold */
    animation: dust-drift 4.7s ease-in-out infinite;
    animation-delay: -0.6s;
  }

  /* ===========================================
     ANIMATIONS
     =========================================== */

  @keyframes twinkle-1 {
    0%, 100% {
      opacity: 0.2;
      transform: scale(0.6);
    }
    50% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes twinkle-2 {
    0%, 100% {
      opacity: 0.4;
      transform: scale(0.8);
    }
    40% {
      opacity: 0.9;
      transform: scale(1.1);
    }
    70% {
      opacity: 0.5;
      transform: scale(0.9);
    }
  }

  @keyframes twinkle-3 {
    0% {
      opacity: 0.3;
      transform: scale(0.7);
    }
    30% {
      opacity: 0.8;
      transform: scale(1.05);
    }
    60% {
      opacity: 0.4;
      transform: scale(0.85);
    }
    100% {
      opacity: 0.3;
      transform: scale(0.7);
    }
  }

  @keyframes dust-drift {
    0%, 100% {
      opacity: 0.15;
      transform: translate(0, 0) scale(0.8);
    }
    33% {
      opacity: 0.4;
      transform: translate(2px, -1px) scale(1);
    }
    66% {
      opacity: 0.2;
      transform: translate(-1px, 1px) scale(0.9);
    }
  }

  /* ===========================================
     INVERTED VARIANT (for mobile menu)
     =========================================== */

  .logo-inverted .logo-img {
    filter: brightness(0) invert(1);
  }

  .logo-inverted .sparkle-dot,
  .logo-inverted .sparkle-dust {
    color: rgba(255, 255, 255, 0.9);
    box-shadow: 0 0 4px rgba(255, 255, 255, 0.8), 0 0 8px rgba(255, 255, 255, 0.5);
  }

  .logo-inverted .sparkle-star {
    background: rgba(255, 255, 255, 0.9);
  }

  /* ===========================================
     ACCESSIBILITY: REDUCED MOTION
     =========================================== */

  @media (prefers-reduced-motion: reduce) {
    .sparkles {
      display: none;
    }
  }
</style>
