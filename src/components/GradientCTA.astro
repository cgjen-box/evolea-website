---
import FloatingShapes from './FloatingShapes.astro';

interface Props {
  title: string;
  description?: string;
  buttonText: string;
  buttonHref: string;
  variant?: 'hero' | 'sunset' | 'calm';
}

const {
  title,
  description,
  buttonText,
  buttonHref,
  variant = 'hero',
} = Astro.props;
---

<section class="gradient-cta" aria-labelledby="cta-title">
  <!-- Floating decorations -->
  <FloatingShapes variant="minimal" />

  <!-- Soft gradient fade at top instead of hard wave -->
  <div class="absolute top-0 left-0 right-0 h-24 bg-gradient-to-b from-evolea-cream to-transparent" aria-hidden="true"></div>

  <div class="gradient-cta-content reveal">
    <h2 id="cta-title" class="text-balance">{title}</h2>
    {description && (
      <p class="text-balance">{description}</p>
    )}
    <a href={buttonHref} class="cta-button btn-mobile-full">
      {buttonText}
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
      </svg>
    </a>
  </div>

  <!-- Decorative elements -->
  <div class="absolute bottom-0 left-1/4 w-32 h-32 rounded-full bg-white/10 blur-2xl" aria-hidden="true"></div>
  <div class="absolute top-1/3 right-1/4 w-24 h-24 rounded-full bg-white/10 blur-xl" aria-hidden="true"></div>
</section>

<style>
  .gradient-cta {
    position: relative;
    padding: 8rem 1rem 5rem;
    overflow: hidden;
    margin: 0;
    /* Flowing gradient from cream through magenta to purple - connects to footer */
    background: linear-gradient(
      180deg,
      #FFFBF7 0%,
      #F5E6F5 8%,
      #E9D5F5 15%,
      #CD87F8 30%,
      #DD48E0 50%,
      #BA53AD 75%,
      #8A3D7E 100%
    );
  }

  .gradient-cta-content {
    position: relative;
    z-index: 10;
    text-align: center;
    max-width: 48rem;
    margin: 0 auto;
  }

  /* WHITE text for contrast on gradient background */
  .gradient-cta h2 {
    font-family: 'Fredoka', 'Poppins', sans-serif;
    font-weight: 700;
    font-size: 2rem;
    color: #FFFFFF;
    margin-bottom: 1.5rem;
    line-height: 1.2;
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
  }

  @media (min-width: 768px) {
    .gradient-cta h2 {
      font-size: 2.5rem;
    }
  }

  @media (min-width: 1024px) {
    .gradient-cta h2 {
      font-size: 3rem;
    }
  }

  .gradient-cta p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.125rem;
    margin-bottom: 2rem;
    max-width: 36rem;
    margin-left: auto;
    margin-right: auto;
    text-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
  }

  /* Enhanced CTA button with more pop */
  .cta-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    background: #FFFFFF;
    color: var(--evolea-magenta, #DD48E0);
    font-weight: 600;
    font-size: 1.125rem;
    padding: 1.25rem 2.5rem;
    border-radius: 100px;
    text-decoration: none;
    box-shadow:
      0 4px 20px rgba(0, 0, 0, 0.15),
      0 0 40px rgba(255, 255, 255, 0.3);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .cta-button:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow:
      0 8px 30px rgba(0, 0, 0, 0.2),
      0 0 60px rgba(255, 255, 255, 0.4);
  }

  .cta-button:active {
    transform: translateY(-1px) scale(0.98);
  }

  .cta-button:focus-visible {
    outline: 3px solid white;
    outline-offset: 4px;
  }

  /* Reduce motion: disable animation */
  @media (prefers-reduced-motion: reduce) {
    .cta-button {
      transition: none;
    }
    .cta-button:hover {
      transform: none;
    }
  }
</style>
