---
import FloatingShapes from './FloatingShapes.astro';

interface Props {
  title: string;
  description?: string;
  buttonText: string;
  buttonHref: string;
  variant?: 'hero' | 'sunset' | 'calm';
}

const {
  title,
  description,
  buttonText,
  buttonHref,
  variant = 'hero',
} = Astro.props;

// TRUE evolea.ch prism gradients
const gradientClasses = {
  hero: 'bg-gradient-prism',
  sunset: 'bg-gradient-sunset',
  calm: 'bg-gradient-ocean',
};
---

<section class:list={['gradient-cta', gradientClasses[variant]]} aria-labelledby="cta-title">
  <!-- Floating decorations -->
  <FloatingShapes variant="minimal" />

  <!-- Wave decoration at top -->
  <div class="absolute top-0 left-0 right-0 w-full overflow-hidden leading-none" aria-hidden="true">
    <svg class="relative block w-full h-12 md:h-20" viewBox="0 0 1200 120" preserveAspectRatio="none">
      <path
        d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
        fill="#FDF8F3"
      ></path>
    </svg>
  </div>

  <div class="gradient-cta-content reveal">
    <h2 id="cta-title" class="text-balance">{title}</h2>
    {description && (
      <p class="text-balance">{description}</p>
    )}
    <a href={buttonHref} class="btn-white btn-mobile-full">
      {buttonText}
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
      </svg>
    </a>
  </div>

  <!-- Decorative elements -->
  <div class="absolute bottom-0 left-1/4 w-32 h-32 rounded-full bg-white/10 blur-2xl" aria-hidden="true"></div>
  <div class="absolute top-1/3 right-1/4 w-24 h-24 rounded-full bg-white/10 blur-xl" aria-hidden="true"></div>
</section>

<style>
  .gradient-cta {
    position: relative;
    padding: 8rem 1rem 6rem;
    overflow: hidden;
    margin-top: 4rem;
  }

  .gradient-cta-content {
    position: relative;
    z-index: 10;
    text-align: center;
    max-width: 48rem;
    margin: 0 auto;
  }

  .gradient-cta h2 {
    font-family: 'Fredoka', 'Poppins', sans-serif;
    font-weight: 700;
    font-size: 2rem;
    color: #BA53AD; /* TRUE evolea.ch purple for contrast on prism bg */
    margin-bottom: 1.5rem;
    line-height: 1.2;
    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.5);
  }

  @media (min-width: 768px) {
    .gradient-cta h2 {
      font-size: 2.5rem;
    }
  }

  @media (min-width: 1024px) {
    .gradient-cta h2 {
      font-size: 3rem;
    }
  }

  .gradient-cta p {
    color: rgba(138, 61, 158, 0.9); /* TRUE evolea.ch purple */
    font-size: 1.125rem;
    margin-bottom: 2rem;
    max-width: 36rem;
    margin-left: auto;
    margin-right: auto;
  }

  /* TRUE evolea.ch PRISM gradient backgrounds */
  .gradient-cta.bg-gradient-prism {
    background: linear-gradient(118deg, #7BEDD5 0%, #FFE066 21%, #FFFFFF 48%, #E97BF1 81%, #CD87F8 100%);
    background-size: 200% 200%;
    animation: gradientFlow 8s ease infinite;
  }

  .gradient-cta.bg-gradient-sunset {
    background: linear-gradient(135deg, #FF7E5D 0%, #EF8EAE 50%, #E97BF1 100%);
    background-size: 200% 200%;
    animation: gradientFlow 8s ease infinite;
  }

  .gradient-cta.bg-gradient-ocean {
    background: linear-gradient(135deg, #7BEDD5 0%, #5DADE2 50%, #CD87F8 100%);
    background-size: 200% 200%;
    animation: gradientFlow 8s ease infinite;
  }

  @keyframes gradientFlow {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  /* Reduce motion: disable animation */
  @media (prefers-reduced-motion: reduce) {
    .gradient-cta {
      animation: none;
      background-size: 100% 100%;
    }
  }
</style>
