---
import Base from '@layouts/Base.astro';
import VideoHero from '@components/VideoHero.astro';
import AngeboteSectionV3 from '@components/AngeboteSectionV3.astro';
import PageCloser from '@components/PageCloser.astro';
import FloatingShapes from '@components/FloatingShapes.astro';
import Icon from '@components/Icon.astro';
import { getLangFromUrl, useTranslations, useTranslatedPath } from '@i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

// 9 Pedagogical Principles - matching ueber-uns page
const principles = [
  {
    iconName: 'chart' as const,
    title: 'Evidenzbasiert',
    description: 'Unsere Arbeit basiert auf wissenschaftlichen Erkenntnissen und bewährten Methoden.',
    color: 'magenta',
  },
  {
    iconName: 'target' as const,
    title: 'Individuell',
    description: 'Jedes Kind wird dort abgeholt, wo es steht.',
    color: 'coral',
  },
  {
    iconName: 'gamepad' as const,
    title: 'Spielerisch',
    description: 'Lernen geschieht durch Spiel und positive Erfahrungen.',
    color: 'yellow',
  },
  {
    iconName: 'clipboard' as const,
    title: 'Strukturiert',
    description: 'Klare Abläufe geben Sicherheit und ermöglichen Lernen.',
    color: 'sky',
  },
  {
    iconName: 'diamond' as const,
    title: 'Ressourcenorientiert',
    description: 'Wir fokussieren auf Stärken, nicht auf Defizite.',
    color: 'mint',
  },
  {
    iconName: 'family' as const,
    title: 'Familienzentriert',
    description: 'Familien sind Partner in der Förderung.',
    color: 'purple',
  },
];

const colorClasses: Record<string, string> = {
  magenta: 'bg-evolea-magenta/10 border-evolea-magenta',
  coral: 'bg-evolea-coral/10 border-evolea-coral',
  yellow: 'bg-evolea-yellow/10 border-evolea-yellow',
  sky: 'bg-evolea-sky/10 border-evolea-sky',
  mint: 'bg-evolea-mint/10 border-evolea-mint',
  purple: 'bg-evolea-purple-light/10 border-evolea-purple-light',
};

---

<Base
  title="Startseite"
  description="EVOLEA Verein - Bildungsangebote für Kinder im Autismus Spektrum oder mit ADHS in Zürich. Mini Garten, Mini Projekte, Mini Turnen und Schulberatung."
  transparentHeader={true}
>
  <!-- Hero Section with Video Background - Vision Statement Style -->
  <VideoHero
    title={t('hero.title')}
    subtitle={t('hero.subtitle')}
    videoSrc={base + "/videos/hero-mobile.mp4"}
    posterSrc={base + "/images/hero-poster.jpg"}
  />

  <!-- About / Mission Section -->
  <section class="section-padding relative overflow-hidden">
    <FloatingShapes variant="section" />

    <div class="container mx-auto max-w-6xl relative z-10">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <!-- Text content -->
        <div class="reveal">
          <span class="section-label">{t('about.title')}</span>
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-evolea-magenta mb-6 leading-tight">
            <span class="doodle-underline">{t('about.subtitle')}</span>
          </h2>
          <p class="text-lg text-evolea-text-light leading-relaxed mb-8">
            {t('about.description')}
          </p>
          <a href={translatePath('/ueber-uns/')} class="btn-primary">
            {t('about.cta')}
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>

        <!-- Visual element / Stats - Glassmorphism cards -->
        <div class="reveal reveal-delay-2">
          <div class="grid grid-cols-2 gap-4">
            <div class="stat-card group">
              <div class="stat-number text-evolea-coral">4+</div>
              <div class="stat-label">Programme</div>
            </div>
            <div class="stat-card group">
              <div class="stat-number text-evolea-mint">3-8</div>
              <div class="stat-label">Jahre</div>
            </div>
            <div class="stat-card group">
              <div class="stat-number text-evolea-purple-light">ZH</div>
              <div class="stat-label">Zürich</div>
            </div>
            <div class="stat-card-featured group">
              <div class="stat-number-featured">100%</div>
              <div class="stat-label-featured">Individuell</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Angebote Section V3 - "Unsere Angebote" -->
  <AngeboteSectionV3 />

  <!-- Pedagogical Principles Section -->
  <section class="section-padding relative overflow-hidden">
    <FloatingShapes variant="minimal" />

    <div class="container mx-auto max-w-6xl relative z-10">
      <div class="section-header reveal">
        <span class="section-label">Pädagogisches Konzept</span>
        <h2>9 Grundsätze unserer Arbeit</h2>
        <p>Diese Prinzipien leiten alles, was wir tun</p>
      </div>

      <!-- Show 6 principles in a grid, link to full list -->
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {principles.map((principle, index) => (
          <div
            class:list={[
              'reveal p-6 rounded-evolea-lg border-l-4 transition-all hover:shadow-soft bg-white',
              colorClasses[principle.color],
            ]}
            style={`animation-delay: ${index * 0.1}s`}
          >
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0">
                <Icon name={principle.iconName} size="lg" />
              </div>
              <div>
                <h3 class="font-display font-bold text-evolea-purple text-lg mb-2">
                  {principle.title}
                </h3>
                <p class="text-evolea-text-light text-sm leading-relaxed">
                  {principle.description}
                </p>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- Link to full principles -->
      <div class="text-center mt-10 reveal">
        <a href={translatePath('/ueber-uns/')} class="inline-flex items-center gap-2 text-evolea-purple font-semibold hover:text-evolea-magenta transition-colors">
          <span>Alle 9 Grundsätze entdecken</span>
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>

    <!-- Spectrum line decoration -->
    <div class="container mx-auto max-w-4xl mt-16">
      <div class="spectrum-line reveal"></div>
    </div>
  </section>

  <!-- Team Preview Section -->
  <section class="section-padding bg-white relative">
    <div class="container mx-auto max-w-6xl">
      <div class="section-header reveal">
        <span class="section-label">{t('nav.team')}</span>
        <h2>{t('team.title')}</h2>
        <p>{t('team.description')}</p>
      </div>

      <!-- Team member preview grid -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-10">
        <div class="reveal reveal-delay-1 text-center group">
          <div class="aspect-square rounded-full overflow-hidden mb-4 shadow-soft group-hover:shadow-elevated transition-shadow mx-auto w-32 md:w-40">
            <img src={base + "/images/team/gianna-spiess.png"} alt="Gianna Spiess" class="w-full h-full object-cover object-top" loading="lazy" />
          </div>
          <h4 class="font-display font-bold text-evolea-purple">Gianna Spiess</h4>
          <p class="text-sm text-evolea-text-light">M.Sc., BCBA</p>
        </div>
        <div class="reveal reveal-delay-2 text-center group">
          <div class="aspect-square rounded-full overflow-hidden mb-4 shadow-soft group-hover:shadow-elevated transition-shadow mx-auto w-32 md:w-40">
            <img src={base + "/images/team/annemarie-elias.png"} alt="Annemarie Elias" class="w-full h-full object-cover object-top" loading="lazy" />
          </div>
          <h4 class="font-display font-bold text-evolea-purple">Annemarie Elias</h4>
          <p class="text-sm text-evolea-text-light">M.Sc., BCBA</p>
        </div>
        <div class="reveal reveal-delay-3 text-center group">
          <div class="aspect-square rounded-full overflow-hidden mb-4 shadow-soft group-hover:shadow-elevated transition-shadow mx-auto w-32 md:w-40">
            <img src={base + "/images/team/christoph-jenny.png"} alt="Christoph Jenny" class="w-full h-full object-cover object-top" loading="lazy" />
          </div>
          <h4 class="font-display font-bold text-evolea-purple">Christoph Jenny</h4>
          <p class="text-sm text-evolea-text-light">Mitgründer</p>
        </div>
        <div class="reveal reveal-delay-4 text-center group">
          <div class="aspect-square rounded-full overflow-hidden mb-4 shadow-soft group-hover:shadow-elevated transition-shadow mx-auto w-32 md:w-40">
            <img src={base + "/images/team/alexandra-aleksic.jpg"} alt="Alexandra Aleksic" class="w-full h-full object-cover object-top" loading="lazy" />
          </div>
          <h4 class="font-display font-bold text-evolea-purple">Alexandra Aleksic</h4>
          <p class="text-sm text-evolea-text-light">B.Sc.</p>
        </div>
      </div>

      <div class="text-center reveal">
        <a href={translatePath('/team/')} class="btn-secondary">
          {t('team.cta')}
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Quick Contact Section -->
  <section class="py-16 bg-gradient-to-b from-evolea-cream to-evolea-mint/10">
    <div class="container mx-auto max-w-4xl px-4">
      <div class="flex flex-col md:flex-row items-center justify-between gap-8">
        <div class="text-center md:text-left">
          <h3 class="font-display font-bold text-evolea-purple text-2xl mb-2">Haben Sie Fragen?</h3>
          <p class="text-evolea-text-light text-lg">Wir sind gerne für Sie da.</p>
        </div>
        <div class="flex flex-wrap gap-4 justify-center">
          <a href="mailto:hello@evolea.ch" class="inline-flex items-center gap-2 px-8 py-4 bg-white rounded-full shadow-soft hover:shadow-elevated hover:-translate-y-1 transition-all text-evolea-purple font-semibold">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            <span>hello@evolea.ch</span>
          </a>
          <a href="https://www.instagram.com/evolea.verein/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-[#833AB4] via-[#FD1D1D] to-[#F77737] text-white rounded-full shadow-soft hover:shadow-elevated hover:-translate-y-1 transition-all font-semibold">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd" />
            </svg>
            <span>Instagram</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Dark Vision Section - per Brand Guide v3 -->
  <section class="vision-section relative overflow-hidden">
    <!-- Background gradient orbs -->
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute w-[600px] h-[600px] rounded-full top-[-200px] right-[-200px]" style="background: radial-gradient(circle, rgba(221, 72, 224, 0.15) 0%, transparent 70%);"></div>
      <div class="absolute w-[400px] h-[400px] rounded-full bottom-[-100px] left-[-100px]" style="background: radial-gradient(circle, rgba(123, 237, 213, 0.12) 0%, transparent 70%);"></div>
    </div>

    <div class="container mx-auto max-w-4xl px-4 relative z-10 text-center">
      <!-- Rainbow gradient logo text -->
      <div class="vision-logo mb-8">EVOLEA</div>

      <h2 class="vision-title">
        {lang === 'de' ? 'Wo Kinder im Spektrum aufblühen' : 'Where Children on the Spectrum Flourish'}
      </h2>

      <p class="vision-description">
        {lang === 'de'
          ? 'EVOLEA schafft Räume, damit sich Kinder im Spektrum entfalten und ihren Weg glücklich und selbstbestimmt gehen können.'
          : 'EVOLEA creates spaces where children on the spectrum can thrive and walk their path happily and self-determined.'}
      </p>

      <!-- Decorative butterfly -->
      <div class="flex justify-center mt-10 opacity-50">
        <svg class="w-16 h-16" viewBox="0 0 100 100">
          <defs>
            <linearGradient id="vision-bf-l" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#7BEDD5"/>
              <stop offset="100%" stop-color="#CD87F8"/>
            </linearGradient>
            <linearGradient id="vision-bf-r" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#FFE066"/>
              <stop offset="100%" stop-color="#E97BF1"/>
            </linearGradient>
          </defs>
          <path d="M48 50 C35 25, 5 20, 10 45 C5 70, 35 75, 48 55 Z" fill="url(#vision-bf-l)"/>
          <path d="M48 55 C35 60, 15 85, 30 90 C45 85, 48 65, 48 55 Z" fill="url(#vision-bf-l)" opacity="0.8"/>
          <path d="M52 50 C65 25, 95 20, 90 45 C95 70, 65 75, 52 55 Z" fill="url(#vision-bf-r)"/>
          <path d="M52 55 C65 60, 85 85, 70 90 C55 85, 52 65, 52 55 Z" fill="url(#vision-bf-r)" opacity="0.8"/>
          <ellipse cx="50" cy="55" rx="2" ry="10" fill="white" opacity="0.8"/>
        </svg>
      </div>
    </div>
  </section>

  <!-- Page Closer - Prism Gradient with Floating Elements -->
  <PageCloser
    showCTA={true}
    ctaTitle={t('contact.title')}
    ctaDescription={t('contact.subtitle')}
    ctaButtonText={t('contact.cta')}
    ctaButtonHref={translatePath('/kontakt/')}
  />
</Base>

<style>
  /* Vision Section - Dark mode per Brand Guide v3 */
  .vision-section {
    background: linear-gradient(180deg, #1A1A2E 0%, #2D2A32 100%);
    padding: 6rem 0;
  }

  .vision-logo {
    font-family: 'Fredoka', sans-serif;
    font-size: 1.25rem;
    font-weight: 600;
    background: linear-gradient(90deg, #7BEDD5, #FFE066, #FF9ECC, #E97BF1, #CD87F8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 0.1em;
  }

  .vision-title {
    font-family: 'Fredoka', sans-serif;
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 700;
    color: #FFFFFF;
    margin-bottom: 1.5rem;
    line-height: 1.2;
  }

  .vision-description {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.8);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.7;
  }
</style>
